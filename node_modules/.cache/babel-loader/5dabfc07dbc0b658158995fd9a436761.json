{"remainingRequest":"/home/trongnhan/Documents/vue3-online-shop/node_modules/babel-loader/lib/index.js!/home/trongnhan/Documents/vue3-online-shop/node_modules/eslint-loader/index.js??ref--13-0!/home/trongnhan/Documents/vue3-online-shop/src/store/modules/cart.module.js","dependencies":[{"path":"/home/trongnhan/Documents/vue3-online-shop/src/store/modules/cart.module.js","mtime":1624773220846},{"path":"/home/trongnhan/Documents/vue3-online-shop/node_modules/cache-loader/dist/cjs.js","mtime":1624773928728},{"path":"/home/trongnhan/Documents/vue3-online-shop/node_modules/babel-loader/lib/index.js","mtime":1624773928639},{"path":"/home/trongnhan/Documents/vue3-online-shop/node_modules/eslint-loader/index.js","mtime":1624773982091}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3Ryb25nbmhhbi9Eb2N1bWVudHMvdnVlMy1vbmxpbmUtc2hvcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCBhcGkgZnJvbSAiQC9zZXJ2aWNlcy9jYXJ0LnNlcnZpY2UiOwoKdmFyIHN0YXRlID0gZnVuY3Rpb24gc3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHByb2R1Y3RzOiBbXSwKICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICBhZGRUb0NhcnRSZXN1bHQ6ICIiLAogICAgdG90YWxJdGVtczogMCwKICAgIGlzU2hvd0NhcnREcm9wZG93bjogZmFsc2UKICB9Owp9OwoKdmFyIGdldHRlcnMgPSB7CiAgdG90YWxJdGVtczogZnVuY3Rpb24gdG90YWxJdGVtcyhzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnByb2R1Y3RzLnJlZHVjZShmdW5jdGlvbiAodG90YWwsIHByb2R1Y3QpIHsKICAgICAgcmV0dXJuIHRvdGFsICsgcHJvZHVjdC5xdWFudGl0eTsKICAgIH0sIDApOwogIH0sCiAgc3ViVG90YWw6IGZ1bmN0aW9uIHN1YlRvdGFsKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucHJvZHVjdHMucmVkdWNlKGZ1bmN0aW9uICh0b3RhbFByaWNlLCBwcm9kdWN0KSB7CiAgICAgIHJldHVybiB0b3RhbFByaWNlICsgcHJvZHVjdC5xdWFudGl0eSAqIHByb2R1Y3QucHJpY2U7CiAgICB9LCAwKTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGFkZFByb2R1Y3RUb0NhcnQ6IGZ1bmN0aW9uIGFkZFByb2R1Y3RUb0NhcnQoX3JlZiwgcHJvZHVjdCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHN0YXRlLCBjb21taXQsIGlzRXhpc3RzLCBuZXdQcm9kdWN0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlLCBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICBpc0V4aXN0cyA9IHN0YXRlLnByb2R1Y3RzLmZpbmQoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICAgIHJldHVybiBwLmlkID09PSBwcm9kdWN0LmlkOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBpZiAoIWlzRXhpc3RzKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29tbWl0KCJzZXRBZGRUb0NhcnRSZXN1bHQiLCAiVGhpcyBpdGVtIHdhcyBhbHJlYWR5IGluIHlvdXIgY2FydC4iKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5hZGRQcm9kdWN0VG9DYXJ0KHByb2R1Y3QpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIG5ld1Byb2R1Y3QgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAobmV3UHJvZHVjdCkgewogICAgICAgICAgICAgICAgY29tbWl0KCJzZXRBZGRUb0NhcnRSZXN1bHQiLCAiSXRlbSBzdWNjZXNzZnVsbHkgYWRkZWQgdG8geW91ciBjYXJ0LiIpOwogICAgICAgICAgICAgICAgY29tbWl0KCJhZGRQcm9kdWN0VG9DYXJ0IiwgbmV3UHJvZHVjdCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjb21taXQoInNldFNob3dDYXJ0RHJvcGRvd24iLCB0cnVlKTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBnZXRQcm9kdWN0c0luQ2FydDogZnVuY3Rpb24gZ2V0UHJvZHVjdHNJbkNhcnQoX3JlZjIpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgY29tbWl0LCBwcm9kdWN0czsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgICAgICAgICAgY29tbWl0KCJzZXRMb2FkaW5nIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBhcGkuZ2V0UHJvZHVjdHNJbkNhcnQoKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBwcm9kdWN0cyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIGNvbW1pdCgic2V0UHJvZHVjdHMiLCBwcm9kdWN0cyk7CiAgICAgICAgICAgICAgY29tbWl0KCJzZXRMb2FkaW5nIiwgZmFsc2UpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfQp9Owp2YXIgbXV0YXRpb25zID0gewogIHNldFNob3dDYXJ0RHJvcGRvd246IGZ1bmN0aW9uIHNldFNob3dDYXJ0RHJvcGRvd24oc3RhdGUsIHN0YXR1cykgewogICAgc3RhdGUuaXNTaG93Q2FydERyb3Bkb3duID0gc3RhdHVzOwogIH0sCiAgc2V0TG9hZGluZzogZnVuY3Rpb24gc2V0TG9hZGluZyhzdGF0ZSwgc3RhdHVzKSB7CiAgICBzdGF0ZS5pc0xvYWRpbmcgPSBzdGF0dXM7CiAgfSwKICBzZXRQcm9kdWN0czogZnVuY3Rpb24gc2V0UHJvZHVjdHMoc3RhdGUsIHByb2R1Y3RzKSB7CiAgICBzdGF0ZS5wcm9kdWN0cyA9IHByb2R1Y3RzLm1hcChmdW5jdGlvbiAocHJvZHVjdCkgewogICAgICBwcm9kdWN0LnRvdGFsUHJpY2UgPSBwcm9kdWN0LnF1YW50aXR5ICogcHJvZHVjdC5wcmljZTsKICAgICAgcmV0dXJuIHByb2R1Y3Q7CiAgICB9KTsKICB9LAogIHVwZGF0ZVByb2R1Y3RRdWFudGl0eTogZnVuY3Rpb24gdXBkYXRlUHJvZHVjdFF1YW50aXR5KHN0YXRlLCBfcmVmMykgewogICAgdmFyIHByb2R1Y3RJZCA9IF9yZWYzLnByb2R1Y3RJZCwKICAgICAgICB2YWx1ZSA9IF9yZWYzLnZhbHVlOwogICAgdmFyIHByb2R1Y3QgPSBzdGF0ZS5wcm9kdWN0cy5maW5kKGZ1bmN0aW9uIChwKSB7CiAgICAgIHJldHVybiBwLmlkID09PSBwcm9kdWN0SWQ7CiAgICB9KTsKICAgIHZhbHVlID0gTnVtYmVyKHZhbHVlKTsKCiAgICBpZiAodmFsdWUgPiAxKSB7CiAgICAgIHByb2R1Y3QucXVhbnRpdHkgPSB2YWx1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHByb2R1Y3QucXVhbnRpdHkgPSAxOwogICAgfQoKICAgIHByb2R1Y3QudG90YWxQcmljZSA9IHByb2R1Y3QucHJpY2UgKiBwcm9kdWN0LnF1YW50aXR5OwogIH0sCiAgYWRkUHJvZHVjdFRvQ2FydDogZnVuY3Rpb24gYWRkUHJvZHVjdFRvQ2FydChzdGF0ZSwgcHJvZHVjdCkgewogICAgc3RhdGUucHJvZHVjdHMucHVzaChwcm9kdWN0KTsKICB9LAogIHNldEFkZFRvQ2FydFJlc3VsdDogZnVuY3Rpb24gc2V0QWRkVG9DYXJ0UmVzdWx0KHN0YXRlLCBtZXNzYWdlKSB7CiAgICBzdGF0ZS5hZGRUb0NhcnRSZXN1bHQgPSBtZXNzYWdlOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIGdldHRlcnM6IGdldHRlcnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucwp9Ow=="},{"version":3,"sources":["/home/trongnhan/Documents/vue3-online-shop/src/store/modules/cart.module.js"],"names":["api","state","products","isLoading","addToCartResult","totalItems","isShowCartDropdown","getters","reduce","total","product","quantity","subTotal","totalPrice","price","actions","addProductToCart","commit","isExists","find","p","id","newProduct","getProductsInCart","mutations","setShowCartDropdown","status","setLoading","setProducts","map","updateProductQuantity","productId","value","Number","push","setAddToCartResult","message","namespaced"],"mappings":"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","sourcesContent":["import api from \"@/services/cart.service\";\n\nconst state = () => ({\n  products: [],\n  isLoading: false,\n  addToCartResult: \"\",\n  totalItems: 0,\n  isShowCartDropdown: false,\n});\n\nconst getters = {\n  totalItems(state) {\n    return state.products.reduce(\n      (total, product) => total + product.quantity,\n      0\n    );\n  },\n\n  subTotal(state) {\n    return state.products.reduce(\n      (totalPrice, product) => totalPrice + product.quantity * product.price,\n      0\n    );\n  },\n};\n\nconst actions = {\n  async addProductToCart({ state, commit }, product) {\n    const isExists = state.products.find((p) => p.id === product.id);\n\n    if (isExists) {\n      commit(\"setAddToCartResult\", \"This item was already in your cart.\");\n    } else {\n      const newProduct = await api.addProductToCart(product);\n\n      if (newProduct) {\n        commit(\"setAddToCartResult\", \"Item successfully added to your cart.\");\n        commit(\"addProductToCart\", newProduct);\n      }\n    }\n\n    commit(\"setShowCartDropdown\", true);\n  },\n\n  async getProductsInCart({ commit }) {\n    commit(\"setLoading\", true);\n\n    const products = await api.getProductsInCart();\n\n    commit(\"setProducts\", products);\n    commit(\"setLoading\", false);\n  },\n};\n\nconst mutations = {\n  setShowCartDropdown(state, status) {\n    state.isShowCartDropdown = status;\n  },\n\n  setLoading(state, status) {\n    state.isLoading = status;\n  },\n\n  setProducts(state, products) {\n    state.products = products.map((product) => {\n      product.totalPrice = product.quantity * product.price;\n      return product;\n    });\n  },\n\n  updateProductQuantity(state, { productId, value }) {\n    const product = state.products.find((p) => p.id === productId);\n\n    value = Number(value);\n\n    if (value > 1) {\n      product.quantity = value;\n    } else {\n      product.quantity = 1;\n    }\n\n    product.totalPrice = product.price * product.quantity;\n  },\n\n  addProductToCart(state, product) {\n    state.products.push(product);\n  },\n\n  setAddToCartResult(state, message) {\n    state.addToCartResult = message;\n  },\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations,\n};\n"]}]}